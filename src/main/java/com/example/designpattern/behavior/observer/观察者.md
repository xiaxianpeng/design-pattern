# 观察者模式（Observer Pattern）

观察者模式，又称发布-订阅模式（Publish-Subscribe），是一种行为型设计模式。  
它定义了一种一对多的依赖关系，当一个对象的状态发生改变时，所有依赖于它的对象都会得到通知并自动更新。  
这种模式能够让发送通知的一方（被观察者）和接收通知的一方（观察者）彼此分离，互不影响。

## 设计模式思想

- **核心思想**：将对象间的依赖关系解耦，允许观察者动态地注册到被观察者上，并在被观察者状态改变时自动触发通知。

## 主要角色

1. **被观察者（Subject）**：
    - 定义注册、移除观察者的方法，并声明一个通知观察者的方法。

2. **具体被观察者（ConcreteSubject）**：
    - 实现被观察者接口，维护观察者列表，并在状态变化时通知所有观察者。

3. **观察者（Observer）**：
    - 为所有具体观察者定义一个接口，声明响应通知更新的方法。

4. **具体观察者（ConcreteObserver）**：
    - 实现观察者接口，定义在被观察者状态改变时的具体响应行为。

## 代码解释

- **ProductObservable**：定义了注册、移除和通知观察者的方法，是被观察者的接口。
- **Store**：实现了 `ProductObservable`，是具体的被观察者，负责维护观察者列表并通知它们。
- **ProductObserver**：是观察者接口，定义了 `update` 方法，所有具体观察者都要实现这个方法。
- **Customer 和 Admin**：实现了 `ProductObserver`，是具体观察者，在接收到通知时执行具体的行为。
- **Product**：简单的数据类，包含产品的基本信息。

## 实际应用

- **事件监听**：在GUI编程中，按钮点击、鼠标移动等事件监听。
- **消息系统**：如消息队列中的发布-订阅模式。
- **广播机制**：实时通知系统中的广播机制。

## 总结

这个电商网站产品通知系统例子很好地体现了观察者模式的四个角色。通过这种设计，被观察者和观察者之间实现了解耦，允许被观察者在其状态变化时通知所有注册的观察者。这种模式提高了系统的扩展性和灵活性，适合在需要动态通知多个依赖对象的场景中使用。